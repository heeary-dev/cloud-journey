# 📘 쉘 함수 총정리 및 실습

## 🎯 오늘 학습 목표
- 함수 흐름과 조건 제어 복습
- return, exit, $? 사용 목적 정리
- 입력값 검증 및 분기 흐름 구성 실습

---

## 🧠 오늘 배운 개념

### 🔹 함수 흐름과 return
- 함수 내부에서 `return 0` 또는 `return 1`로 상태코드 반환
- 함수 호출 후에는 `$?`로 상태를 확인하여 흐름 제어

### 🔹 조건문과 입력값 검증
- `-z "$var"`: 입력값이 비어 있는지 확인
- 로그인 실패, 점수 입력 누락 등에서 사용

### 🔹 전체 흐름 구조 구성
```
main() {
  login        # 로그인 시도
  if [ $? -ne 0 ]; then exit 1; fi
  check_role   # 권한 확인
  menu         # 메뉴 실행
}
```

### 🔹 case 선택문 실무 패턴
- 여러 선택지 중 하나를 처리할 때 간결하고 가독성이 뛰어남
- 기본값은 `*`으로 처리하며, 각 블록은 `;;`으로 종료해야 함

```
case "$choice" in
  1)
    echo "현재 시간: $(date)"
    ;;
  2)
    echo "현재 사용자: $(whoami)"
    ;;
  3)
    echo "종료합니다"
    exit 0
    ;;
  *)
    echo "잘못된 선택입니다"
    ;;
esac
```

### 🔹 실습 중 사용한 명령어 요약
```
function_name() { ... }        # 함수 정의
return 0 / 1 # 함수 결과 반환 $?  # 직전 명령 상태 확인
exit 0 / 1 # 전체 종료 -z "$var" # 입력값 비어있는지 검사
read -p "..." var              # 사용자 입력
case "$var" in ... esac        # 메뉴 처리
```

---

## 🧪 실습 과정 요약
1. `login()`:
   - 사용자로부터 ID/PW 입력
   - 입력값 비어있으면 실패 처리
   - 값이 정확하면 return 0, 틀리면 return 1

2. `check_role()`:
   - 슈퍼유저인지 yes/no로 확인
   - 단순 메시지 출력 용도 (return 없음)

3. `menu()`:
   - 번호 선택 방식으로 분기 처리
   - `1 → date`, `2 → whoami`, `3 → 종료`, 그 외 → 오류 메시지 출력

---

### ⚠️ 실수 & 깨달은 점
- `$?`를 사용하기 전에 return을 명확히 써야 한다는 점을 다시 확인
- 조건문 내에서 return이 왜 필요한지 명확히 이해
- case문 안에 ;; 없으면 다음 블록까지 실행될 수 있음 → 꼭 닫아야 함
- `-z` 조건 체크를 빼먹으면 의도치 않은 동작 발생 가능

---

### 💭 느낀 점
지금까지 배운 모든 문법이 하나의 흐름으로 연결되어  
실제로 **작은 프로그램처럼 설계된 스크립트**를 완성할 수 있었다.  
조건문, 선택문, 함수, 흐름 제어 등 실무에 필요한 구조를 모두 적용해봄으로써  
쉘 스크립트를 더 자신 있게 작성할 수 있는 기반을 만들 수 있었다.


