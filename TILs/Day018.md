# 📘 함수 응용 및 심화

## 🎯 오늘 학습 목표
- `return`, `exit`, `$?`의 역할 차이와 실전 사용 방식 이해
- 입력 검증 → 로그인 → 명령 실행의 실무 흐름 구성 연습
- 함수 분리 및 `main()` 중심 설계 방식 습득

---

## 🧠 오늘 배운 개념

### 🔹 함수 흐름 분리
- `check_input()` : 입력값 유효성 검사 (`-z`)
- `login()` : ID/PW 확인 후 상태코드 반환
- `handle_command()` : case문을 통한 명령 분기
- `main()` : 전체 흐름을 통제하고 오류 시 exit 처리

### 🔹 return vs exit
- `return` : 함수 내부 종료 및 상태코드 전달 (0 = 성공, 1 = 실패)
- `exit` : 스크립트 전체 종료 (실패 상황 시 사용, 함수 안에서는 사용 금지)

### 🔹 상태코드 `$?`
- 직전 명령의 결과 상태코드 저장 (즉시 확인 필수)
- 조건 흐름 판단용으로 사용 (`if [ $? -ne 0 ]`)

---

### 🔹 실습 중 사용한 명령어 요약

```
function_name() { ... }     # 함수 정의
return 0 / return 1         # 상태코드 반환
exit 1                      # 전체 종료
$?                          # 상태코드 확인
read -p "..." var           # 사용자 입력
case "$var" in ...)         # 선택지 분기 처리
```

---

## 🧪 실습 과정 요약
1. `check_input()` 함수로 ID/PW가 비어 있는지 검사  
2. `login()` 함수에서 올바른 ID/PW인지 확인하고 상태코드 반환  
3. `main()` 함수에서 각 함수 결과를 `$?`로 판단하여 실패 시 exit 처리  
4. 로그인 성공 시 `handle_command()` 호출하여 명령 실행  
5. `case` 문에서 `start`, `stop`, `status`, 기타 명령 처리 분기

---

### ⚠️ 실수 & 깨달은 점
- `$?`는 **직전 줄**에서만 정확한 값을 가지므로, 바로 체크해야 한다  
- `exit`을 함수 내부에서 쓰면 전체가 중단되므로 **반드시 main에서만 사용**  
- 함수들을 **역할별로 분리**하니 흐름이 훨씬 읽기 쉬워졌고 유지보수도 쉬워짐

---

### 💭 느낀 점  
오늘은 함수와 조건문을 넘어,  
**"흐름을 제어하는 구조 자체를 설계"하는 경험**을 했다.  
함수 → return → $? → 조건문 → exit 구조가  
자동화 스크립트의 근간이라는 걸 확실히 체감했다. 



